{"version":3,"names":["_reactNative","require","_checkCppVersion","NativeReanimated","_classCallCheck2","default","_defineProperty","global","__reanimatedModuleProxy","undefined","ReanimatedModule","NativeModules","installTurboModule","Error","checkCppVersion","InnerNativeModule","_createClass2","key","value","installCoreFunctions","callGuard","valueUnpacker","makeShareableClone","shouldPersistRemote","makeSynchronizedDataHolder","valueRef","getDataSynchronously","ref","scheduleOnUI","shareable","registerSensor","sensorType","interval","iosReferenceFrame","handler","unregisterSensor","sensorId","registerEventHandler","eventHash","eventHandler","unregisterEventHandler","id","getViewProp","viewTag","propName","callback","configureLayoutAnimation","type","sharedTransitionTag","config","enableLayoutAnimations","flag","configureProps","uiProps","nativeProps","subscribeForKeyboardEvents","isStatusBarTranslucent","unsubscribeFromKeyboardEvents","listenerId","exports"],"sources":["NativeReanimated.ts"],"sourcesContent":["import { NativeModules } from 'react-native';\nimport type {\n  ShareableRef,\n  ShareableSyncDataHolderRef,\n  Value3D,\n  ValueRotation,\n} from '../commonTypes';\nimport type {\n  LayoutAnimationFunction,\n  LayoutAnimationType,\n} from '../layoutReanimation';\nimport { checkCppVersion } from '../platform-specific/checkCppVersion';\n\n// this is the type of `__reanimatedModuleProxy` which is injected using JSI\nexport interface NativeReanimatedModule {\n  installCoreFunctions(\n    callGuard: <T extends Array<unknown>, U>(\n      fn: (...args: T) => U,\n      ...args: T\n    ) => void,\n    valueUnpacker: <T>(value: T) => T\n  ): void;\n  makeShareableClone<T>(\n    value: T,\n    shouldPersistRemote: boolean\n  ): ShareableRef<T>;\n  makeSynchronizedDataHolder<T>(\n    valueRef: ShareableRef<T>\n  ): ShareableSyncDataHolderRef<T>;\n  getDataSynchronously<T>(ref: ShareableSyncDataHolderRef<T>): T;\n  scheduleOnUI<T>(shareable: ShareableRef<T>): void;\n  registerEventHandler<T>(\n    eventHash: string,\n    eventHandler: ShareableRef<T>\n  ): number;\n  unregisterEventHandler(id: number): void;\n  getViewProp<T>(\n    viewTag: string,\n    propName: string,\n    callback?: (result: T) => void\n  ): Promise<T>;\n  enableLayoutAnimations(flag: boolean): void;\n  registerSensor(\n    sensorType: number,\n    interval: number,\n    iosReferenceFrame: number,\n    handler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ): number;\n  unregisterSensor(sensorId: number): void;\n  configureProps(uiProps: string[], nativeProps: string[]): void;\n  subscribeForKeyboardEvents(\n    handler: ShareableRef<number>,\n    isStatusBarTranslucent: boolean\n  ): number;\n  unsubscribeFromKeyboardEvents(listenerId: number): void;\n  configureLayoutAnimation(\n    viewTag: number,\n    type: LayoutAnimationType,\n    sharedTransitionTag: string,\n    config: ShareableRef<Keyframe | LayoutAnimationFunction>\n  ): void;\n}\n\nexport class NativeReanimated {\n  native = true;\n  private InnerNativeModule: NativeReanimatedModule;\n\n  constructor() {\n    if (global.__reanimatedModuleProxy === undefined) {\n      const { ReanimatedModule } = NativeModules;\n      ReanimatedModule?.installTurboModule();\n    }\n    if (global.__reanimatedModuleProxy === undefined) {\n      throw new Error(\n        `[Reanimated] The native part of Reanimated doesn't seem to be initialized. This could be caused by\\n\\\n- not rebuilding the app after installing or upgrading Reanimated\\n\\\n- trying to run Reanimated on an unsupported platform\\n\\\n- running in a brownfield app without manually initializing the native library`\n      );\n    }\n    checkCppVersion();\n    this.InnerNativeModule = global.__reanimatedModuleProxy;\n  }\n\n  installCoreFunctions(\n    callGuard: <T extends Array<unknown>, U>(\n      fn: (...args: T) => U,\n      ...args: T\n    ) => void,\n    valueUnpacker: <T>(value: T) => T\n  ) {\n    return this.InnerNativeModule.installCoreFunctions(\n      callGuard,\n      valueUnpacker\n    );\n  }\n\n  makeShareableClone<T>(value: T, shouldPersistRemote: boolean) {\n    return this.InnerNativeModule.makeShareableClone(\n      value,\n      shouldPersistRemote\n    );\n  }\n\n  makeSynchronizedDataHolder<T>(valueRef: ShareableRef<T>) {\n    return this.InnerNativeModule.makeSynchronizedDataHolder(valueRef);\n  }\n\n  getDataSynchronously<T>(ref: ShareableSyncDataHolderRef<T>) {\n    return this.InnerNativeModule.getDataSynchronously(ref);\n  }\n\n  scheduleOnUI<T>(shareable: ShareableRef<T>) {\n    return this.InnerNativeModule.scheduleOnUI(shareable);\n  }\n\n  registerSensor(\n    sensorType: number,\n    interval: number,\n    iosReferenceFrame: number,\n    handler: ShareableRef<(data: Value3D | ValueRotation) => void>\n  ) {\n    return this.InnerNativeModule.registerSensor(\n      sensorType,\n      interval,\n      iosReferenceFrame,\n      handler\n    );\n  }\n\n  unregisterSensor(sensorId: number) {\n    return this.InnerNativeModule.unregisterSensor(sensorId);\n  }\n\n  registerEventHandler<T>(eventHash: string, eventHandler: ShareableRef<T>) {\n    return this.InnerNativeModule.registerEventHandler(eventHash, eventHandler);\n  }\n\n  unregisterEventHandler(id: number) {\n    return this.InnerNativeModule.unregisterEventHandler(id);\n  }\n\n  getViewProp<T>(\n    viewTag: string,\n    propName: string,\n    callback?: (result: T) => void\n  ) {\n    return this.InnerNativeModule.getViewProp(viewTag, propName, callback);\n  }\n\n  configureLayoutAnimation(\n    viewTag: number,\n    type: LayoutAnimationType,\n    sharedTransitionTag: string,\n    config: ShareableRef<Keyframe | LayoutAnimationFunction>\n  ) {\n    this.InnerNativeModule.configureLayoutAnimation(\n      viewTag,\n      type,\n      sharedTransitionTag,\n      config\n    );\n  }\n\n  enableLayoutAnimations(flag: boolean) {\n    this.InnerNativeModule.enableLayoutAnimations(flag);\n  }\n\n  configureProps(uiProps: string[], nativeProps: string[]) {\n    this.InnerNativeModule.configureProps(uiProps, nativeProps);\n  }\n\n  subscribeForKeyboardEvents(\n    handler: ShareableRef<number>,\n    isStatusBarTranslucent: boolean\n  ) {\n    return this.InnerNativeModule.subscribeForKeyboardEvents(\n      handler,\n      isStatusBarTranslucent\n    );\n  }\n\n  unsubscribeFromKeyboardEvents(listenerId: number) {\n    this.InnerNativeModule.unsubscribeFromKeyboardEvents(listenerId);\n  }\n}\n"],"mappings":"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"}