70d2da19f2d8beafa392ef2bdeaf91f3
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.configureLayoutAnimations = configureLayoutAnimations;
exports.configureProps = configureProps;
exports.enableLayoutAnimations = enableLayoutAnimations;
exports.getSensorContainer = getSensorContainer;
exports.getViewProp = getViewProp;
exports.initializeSensor = initializeSensor;
exports.isReanimated3 = exports.isConfigured = void 0;
Object.defineProperty(exports, "makeMutable", {
  enumerable: true,
  get: function get() {
    return _mutables.makeMutable;
  }
});
Object.defineProperty(exports, "makeRemote", {
  enumerable: true,
  get: function get() {
    return _mutables.makeRemote;
  }
});
Object.defineProperty(exports, "makeShareable", {
  enumerable: true,
  get: function get() {
    return _shareables.makeShareable;
  }
});
exports.registerEventHandler = registerEventHandler;
exports.registerSensor = registerSensor;
Object.defineProperty(exports, "runOnJS", {
  enumerable: true,
  get: function get() {
    return _threads.runOnJS;
  }
});
Object.defineProperty(exports, "runOnUI", {
  enumerable: true,
  get: function get() {
    return _threads.runOnUI;
  }
});
Object.defineProperty(exports, "startMapper", {
  enumerable: true,
  get: function get() {
    return _mappers.startMapper;
  }
});
Object.defineProperty(exports, "stopMapper", {
  enumerable: true,
  get: function get() {
    return _mappers.stopMapper;
  }
});
exports.subscribeForKeyboardEvents = subscribeForKeyboardEvents;
exports.unregisterEventHandler = unregisterEventHandler;
exports.unregisterSensor = unregisterSensor;
exports.unsubscribeFromKeyboardEvents = unsubscribeFromKeyboardEvents;
var _NativeReanimated = _interopRequireDefault(require("./NativeReanimated"));
var _PlatformChecker = require("./PlatformChecker");
var _shareables = require("./shareables");
var _initializers = require("./initializers");
var _SensorContainer = require("./SensorContainer");
var _mappers = require("./mappers");
var _threads = require("./threads");
var _mutables = require("./mutables");
var isReanimated3 = function isReanimated3() {
  return true;
};
exports.isReanimated3 = isReanimated3;
var isConfigured = isReanimated3;
exports.isConfigured = isConfigured;
global._WORKLET = false;
global._log = function (s) {
  console.log(s);
};
function getViewProp(viewTag, propName) {
  if (global._IS_FABRIC) {
    throw new Error('[react-native-reanimated] `getViewProp` is not supported on Fabric yet');
  }
  return new Promise(function (resolve, reject) {
    return _NativeReanimated.default.getViewProp(viewTag, propName, function (result) {
      if (typeof result === 'string' && result.substr(0, 6) === 'error:') {
        reject(result);
      } else {
        resolve(result);
      }
    });
  });
}
function getSensorContainer() {
  if (!global.__sensorContainer) {
    global.__sensorContainer = new _SensorContainer.SensorContainer();
  }
  return global.__sensorContainer;
}
function registerEventHandler(eventHash, eventHandler) {
  function handleAndFlushAnimationFrame(eventTimestamp, event) {
    'worklet';

    global.__frameTimestamp = eventTimestamp;
    eventHandler(event);
    global.__flushAnimationFrame(eventTimestamp);
    global.__frameTimestamp = undefined;
  }
  return _NativeReanimated.default.registerEventHandler(eventHash, (0, _shareables.makeShareableCloneRecursive)(handleAndFlushAnimationFrame));
}
function unregisterEventHandler(id) {
  return _NativeReanimated.default.unregisterEventHandler(id);
}
function subscribeForKeyboardEvents(eventHandler, options) {
  var _options$isStatusBarT;
  function handleAndFlushAnimationFrame(state, height) {
    'worklet';

    var now = performance.now();
    global.__frameTimestamp = now;
    eventHandler(state, height);
    global.__flushAnimationFrame(now);
    global.__frameTimestamp = undefined;
  }
  return _NativeReanimated.default.subscribeForKeyboardEvents((0, _shareables.makeShareableCloneRecursive)(handleAndFlushAnimationFrame), (_options$isStatusBarT = options.isStatusBarTranslucentAndroid) != null ? _options$isStatusBarT : false);
}
function unsubscribeFromKeyboardEvents(listenerId) {
  return _NativeReanimated.default.unsubscribeFromKeyboardEvents(listenerId);
}
function registerSensor(sensorType, config, eventHandler) {
  var sensorContainer = getSensorContainer();
  return sensorContainer.registerSensor(sensorType, config, (0, _shareables.makeShareableCloneRecursive)(eventHandler));
}
function initializeSensor(sensorType, config) {
  var sensorContainer = getSensorContainer();
  return sensorContainer.initializeSensor(sensorType, config);
}
function unregisterSensor(sensorId) {
  var sensorContainer = getSensorContainer();
  return sensorContainer.unregisterSensor(sensorId);
}
if (!(0, _PlatformChecker.isWeb)()) {
  (0, _initializers.initializeUIRuntime)();
}
var featuresConfig = {
  enableLayoutAnimations: false,
  setByUser: false
};
function enableLayoutAnimations(flag) {
  var isCallByUser = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  if (isCallByUser) {
    featuresConfig = {
      enableLayoutAnimations: flag,
      setByUser: true
    };
    _NativeReanimated.default.enableLayoutAnimations(flag);
  } else if (!featuresConfig.setByUser && featuresConfig.enableLayoutAnimations !== flag) {
    featuresConfig.enableLayoutAnimations = flag;
    _NativeReanimated.default.enableLayoutAnimations(flag);
  }
}
function configureLayoutAnimations(viewTag, type, config) {
  var sharedTransitionTag = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';
  _NativeReanimated.default.configureLayoutAnimation(viewTag, type, sharedTransitionTag, (0, _shareables.makeShareableCloneRecursive)(config));
}
function configureProps(uiProps, nativeProps) {
  if (!(0, _PlatformChecker.nativeShouldBeMock)()) {
    _NativeReanimated.default.configureProps(uiProps, nativeProps);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlUmVhbmltYXRlZCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX1BsYXRmb3JtQ2hlY2tlciIsIl9zaGFyZWFibGVzIiwiX2luaXRpYWxpemVycyIsIl9TZW5zb3JDb250YWluZXIiLCJfbWFwcGVycyIsIl90aHJlYWRzIiwiX211dGFibGVzIiwiaXNSZWFuaW1hdGVkMyIsImV4cG9ydHMiLCJpc0NvbmZpZ3VyZWQiLCJnbG9iYWwiLCJfV09SS0xFVCIsIl9sb2ciLCJzIiwiY29uc29sZSIsImxvZyIsImdldFZpZXdQcm9wIiwidmlld1RhZyIsInByb3BOYW1lIiwiX0lTX0ZBQlJJQyIsIkVycm9yIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJOYXRpdmVSZWFuaW1hdGVkTW9kdWxlIiwicmVzdWx0Iiwic3Vic3RyIiwiZ2V0U2Vuc29yQ29udGFpbmVyIiwiX19zZW5zb3JDb250YWluZXIiLCJTZW5zb3JDb250YWluZXIiLCJyZWdpc3RlckV2ZW50SGFuZGxlciIsImV2ZW50SGFzaCIsImV2ZW50SGFuZGxlciIsImhhbmRsZUFuZEZsdXNoQW5pbWF0aW9uRnJhbWUiLCJldmVudFRpbWVzdGFtcCIsImV2ZW50IiwiX19mcmFtZVRpbWVzdGFtcCIsIl9fZmx1c2hBbmltYXRpb25GcmFtZSIsInVuZGVmaW5lZCIsIm1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZSIsInVucmVnaXN0ZXJFdmVudEhhbmRsZXIiLCJpZCIsInN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzIiwib3B0aW9ucyIsIl9vcHRpb25zJGlzU3RhdHVzQmFyVCIsInN0YXRlIiwiaGVpZ2h0Iiwibm93IiwicGVyZm9ybWFuY2UiLCJpc1N0YXR1c0JhclRyYW5zbHVjZW50QW5kcm9pZCIsInVuc3Vic2NyaWJlRnJvbUtleWJvYXJkRXZlbnRzIiwibGlzdGVuZXJJZCIsInJlZ2lzdGVyU2Vuc29yIiwic2Vuc29yVHlwZSIsImNvbmZpZyIsInNlbnNvckNvbnRhaW5lciIsImluaXRpYWxpemVTZW5zb3IiLCJ1bnJlZ2lzdGVyU2Vuc29yIiwic2Vuc29ySWQiLCJpc1dlYiIsImluaXRpYWxpemVVSVJ1bnRpbWUiLCJmZWF0dXJlc0NvbmZpZyIsImVuYWJsZUxheW91dEFuaW1hdGlvbnMiLCJzZXRCeVVzZXIiLCJmbGFnIiwiaXNDYWxsQnlVc2VyIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiY29uZmlndXJlTGF5b3V0QW5pbWF0aW9ucyIsInR5cGUiLCJzaGFyZWRUcmFuc2l0aW9uVGFnIiwiY29uZmlndXJlTGF5b3V0QW5pbWF0aW9uIiwiY29uZmlndXJlUHJvcHMiLCJ1aVByb3BzIiwibmF0aXZlUHJvcHMiLCJuYXRpdmVTaG91bGRCZU1vY2siXSwic291cmNlcyI6WyJjb3JlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlIGZyb20gJy4vTmF0aXZlUmVhbmltYXRlZCc7XG5pbXBvcnQgeyBuYXRpdmVTaG91bGRCZU1vY2ssIGlzV2ViIH0gZnJvbSAnLi9QbGF0Zm9ybUNoZWNrZXInO1xuaW1wb3J0IHR5cGUge1xuICBBbmltYXRlZEtleWJvYXJkT3B0aW9ucyxcbiAgU2Vuc29yQ29uZmlnLFxuICBTZW5zb3JUeXBlLFxuICBTaGFyZWRWYWx1ZSxcbiAgVmFsdWUzRCxcbiAgVmFsdWVSb3RhdGlvbixcbn0gZnJvbSAnLi9jb21tb25UeXBlcyc7XG5pbXBvcnQgeyBtYWtlU2hhcmVhYmxlQ2xvbmVSZWN1cnNpdmUgfSBmcm9tICcuL3NoYXJlYWJsZXMnO1xuaW1wb3J0IHR5cGUge1xuICBMYXlvdXRBbmltYXRpb25GdW5jdGlvbixcbiAgTGF5b3V0QW5pbWF0aW9uVHlwZSxcbn0gZnJvbSAnLi9sYXlvdXRSZWFuaW1hdGlvbic7XG5pbXBvcnQgeyBpbml0aWFsaXplVUlSdW50aW1lIH0gZnJvbSAnLi9pbml0aWFsaXplcnMnO1xuaW1wb3J0IHR5cGUge1xuICBQcm9ncmVzc0FuaW1hdGlvbkNhbGxiYWNrLFxuICBTaGFyZWRUcmFuc2l0aW9uQW5pbWF0aW9uc0Z1bmN0aW9uLFxufSBmcm9tICcuL2xheW91dFJlYW5pbWF0aW9uL2FuaW1hdGlvbkJ1aWxkZXIvY29tbW9uVHlwZXMnO1xuaW1wb3J0IHsgU2Vuc29yQ29udGFpbmVyIH0gZnJvbSAnLi9TZW5zb3JDb250YWluZXInO1xuXG5leHBvcnQgeyBzdGFydE1hcHBlciwgc3RvcE1hcHBlciB9IGZyb20gJy4vbWFwcGVycyc7XG5leHBvcnQgeyBydW5PbkpTLCBydW5PblVJIH0gZnJvbSAnLi90aHJlYWRzJztcbmV4cG9ydCB7IG1ha2VTaGFyZWFibGUgfSBmcm9tICcuL3NoYXJlYWJsZXMnO1xuZXhwb3J0IHsgbWFrZU11dGFibGUsIG1ha2VSZW1vdGUgfSBmcm9tICcuL211dGFibGVzJztcblxuZXhwb3J0IHR5cGUgUmVhbmltYXRlZENvbnNvbGUgPSBQaWNrPFxuICBDb25zb2xlLFxuICAnZGVidWcnIHwgJ2xvZycgfCAnd2FybicgfCAnaW5mbycgfCAnZXJyb3InXG4+O1xuXG4vKipcbiAqIEByZXR1cm5zIGB0cnVlYCBpbiBSZWFuaW1hdGVkIDMsIGRvZXNuJ3QgZXhpc3QgaW4gUmVhbmltYXRlZCAyIG9yIDFcbiAqL1xuZXhwb3J0IGNvbnN0IGlzUmVhbmltYXRlZDMgPSAoKSA9PiB0cnVlO1xuXG4vLyBTdXBlcnNlZGVkIGJ5IGNoZWNrIGluIGAvc3JjL3RocmVhZHMudHNgLlxuLy8gVXNlZCBieSBgcmVhY3QtbmF2aWdhdGlvbmAgdG8gZGV0ZWN0IGlmIHVzaW5nIFJlYW5pbWF0ZWQgMiBvciAzLlxuLyoqXG4gKiBAZGVwcmVjYXRlZCBUaGlzIGZ1bmN0aW9uIHdhcyBzdXBlcnNlZGVkIGJ5IG90aGVyIGNoZWNrcy5cbiAqIFdlIGtlZXAgaXQgaGVyZSBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSByZWFzb25zLlxuICogSWYgeW91IG5lZWQgdG8gY2hlY2sgaWYgeW91IGFyZSB1c2luZyBSZWFuaW1hdGVkIDMgb3IgUmVhbmltYXRlZCAyXG4gKiBwbGVhc2UgdXNlIGBpc1JlYW5pbWF0ZWQzYCBmdW5jdGlvbiBpbnN0ZWFkLlxuICogQHJldHVybnMgYHRydWVgIGluIFJlYW5pbWF0ZWQgMywgZG9lc24ndCBleGlzdCBpbiBSZWFuaW1hdGVkIDJcbiAqL1xuZXhwb3J0IGNvbnN0IGlzQ29uZmlndXJlZCA9IGlzUmVhbmltYXRlZDM7XG5cbi8vIHRoaXMgaXMgZm9yIHdlYiBpbXBsZW1lbnRhdGlvblxuZ2xvYmFsLl9XT1JLTEVUID0gZmFsc2U7XG5nbG9iYWwuX2xvZyA9IGZ1bmN0aW9uIChzOiBzdHJpbmcpIHtcbiAgY29uc29sZS5sb2cocyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Vmlld1Byb3A8VD4odmlld1RhZzogc3RyaW5nLCBwcm9wTmFtZTogc3RyaW5nKTogUHJvbWlzZTxUPiB7XG4gIGlmIChnbG9iYWwuX0lTX0ZBQlJJQykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdbcmVhY3QtbmF0aXZlLXJlYW5pbWF0ZWRdIGBnZXRWaWV3UHJvcGAgaXMgbm90IHN1cHBvcnRlZCBvbiBGYWJyaWMgeWV0J1xuICAgICk7XG4gIH1cblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHJldHVybiBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlLmdldFZpZXdQcm9wKFxuICAgICAgdmlld1RhZyxcbiAgICAgIHByb3BOYW1lLFxuICAgICAgKHJlc3VsdDogVCkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycgJiYgcmVzdWx0LnN1YnN0cigwLCA2KSA9PT0gJ2Vycm9yOicpIHtcbiAgICAgICAgICByZWplY3QocmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlbnNvckNvbnRhaW5lcigpOiBTZW5zb3JDb250YWluZXIge1xuICBpZiAoIWdsb2JhbC5fX3NlbnNvckNvbnRhaW5lcikge1xuICAgIGdsb2JhbC5fX3NlbnNvckNvbnRhaW5lciA9IG5ldyBTZW5zb3JDb250YWluZXIoKTtcbiAgfVxuICByZXR1cm4gZ2xvYmFsLl9fc2Vuc29yQ29udGFpbmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJFdmVudEhhbmRsZXI8VD4oXG4gIGV2ZW50SGFzaDogc3RyaW5nLFxuICBldmVudEhhbmRsZXI6IChldmVudDogVCkgPT4gdm9pZFxuKTogbnVtYmVyIHtcbiAgZnVuY3Rpb24gaGFuZGxlQW5kRmx1c2hBbmltYXRpb25GcmFtZShldmVudFRpbWVzdGFtcDogbnVtYmVyLCBldmVudDogVCkge1xuICAgICd3b3JrbGV0JztcbiAgICBnbG9iYWwuX19mcmFtZVRpbWVzdGFtcCA9IGV2ZW50VGltZXN0YW1wO1xuICAgIGV2ZW50SGFuZGxlcihldmVudCk7XG4gICAgZ2xvYmFsLl9fZmx1c2hBbmltYXRpb25GcmFtZShldmVudFRpbWVzdGFtcCk7XG4gICAgZ2xvYmFsLl9fZnJhbWVUaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIE5hdGl2ZVJlYW5pbWF0ZWRNb2R1bGUucmVnaXN0ZXJFdmVudEhhbmRsZXIoXG4gICAgZXZlbnRIYXNoLFxuICAgIG1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZShoYW5kbGVBbmRGbHVzaEFuaW1hdGlvbkZyYW1lKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW5yZWdpc3RlckV2ZW50SGFuZGxlcihpZDogbnVtYmVyKTogdm9pZCB7XG4gIHJldHVybiBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlLnVucmVnaXN0ZXJFdmVudEhhbmRsZXIoaWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3Vic2NyaWJlRm9yS2V5Ym9hcmRFdmVudHMoXG4gIGV2ZW50SGFuZGxlcjogKHN0YXRlOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB2b2lkLFxuICBvcHRpb25zOiBBbmltYXRlZEtleWJvYXJkT3B0aW9uc1xuKTogbnVtYmVyIHtcbiAgLy8gVE9ETzogdGhpcyBzaG91bGQgcmVhbGx5IGdvIHdpdGggdGhlIHNhbWUgY29kZSBwYXRoIGFzIG90aGVyIGV2ZW50cywgdGhhdCBpc1xuICAvLyB2aWEgcmVnaXN0ZXJFdmVudEhhbmRsZXIuIEZvciBub3cgd2UgYXJlIGNvcHlpbmcgdGhlIGNvZGUgZnJvbSB0aGVyZS5cbiAgZnVuY3Rpb24gaGFuZGxlQW5kRmx1c2hBbmltYXRpb25GcmFtZShzdGF0ZTogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgICd3b3JrbGV0JztcbiAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBnbG9iYWwuX19mcmFtZVRpbWVzdGFtcCA9IG5vdztcbiAgICBldmVudEhhbmRsZXIoc3RhdGUsIGhlaWdodCk7XG4gICAgZ2xvYmFsLl9fZmx1c2hBbmltYXRpb25GcmFtZShub3cpO1xuICAgIGdsb2JhbC5fX2ZyYW1lVGltZXN0YW1wID0gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlLnN1YnNjcmliZUZvcktleWJvYXJkRXZlbnRzKFxuICAgIG1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZShoYW5kbGVBbmRGbHVzaEFuaW1hdGlvbkZyYW1lKSxcbiAgICBvcHRpb25zLmlzU3RhdHVzQmFyVHJhbnNsdWNlbnRBbmRyb2lkID8/IGZhbHNlXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnN1YnNjcmliZUZyb21LZXlib2FyZEV2ZW50cyhsaXN0ZW5lcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgcmV0dXJuIE5hdGl2ZVJlYW5pbWF0ZWRNb2R1bGUudW5zdWJzY3JpYmVGcm9tS2V5Ym9hcmRFdmVudHMobGlzdGVuZXJJZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNlbnNvcihcbiAgc2Vuc29yVHlwZTogU2Vuc29yVHlwZSxcbiAgY29uZmlnOiBTZW5zb3JDb25maWcsXG4gIGV2ZW50SGFuZGxlcjogKFxuICAgIGRhdGE6IFZhbHVlM0QgfCBWYWx1ZVJvdGF0aW9uLFxuICAgIG9yaWVudGF0aW9uRGVncmVlczogbnVtYmVyXG4gICkgPT4gdm9pZFxuKTogbnVtYmVyIHtcbiAgY29uc3Qgc2Vuc29yQ29udGFpbmVyID0gZ2V0U2Vuc29yQ29udGFpbmVyKCk7XG4gIHJldHVybiBzZW5zb3JDb250YWluZXIucmVnaXN0ZXJTZW5zb3IoXG4gICAgc2Vuc29yVHlwZSxcbiAgICBjb25maWcsXG4gICAgbWFrZVNoYXJlYWJsZUNsb25lUmVjdXJzaXZlKGV2ZW50SGFuZGxlcilcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVTZW5zb3IoXG4gIHNlbnNvclR5cGU6IFNlbnNvclR5cGUsXG4gIGNvbmZpZzogU2Vuc29yQ29uZmlnXG4pOiBTaGFyZWRWYWx1ZTxWYWx1ZTNEIHwgVmFsdWVSb3RhdGlvbj4ge1xuICBjb25zdCBzZW5zb3JDb250YWluZXIgPSBnZXRTZW5zb3JDb250YWluZXIoKTtcbiAgcmV0dXJuIHNlbnNvckNvbnRhaW5lci5pbml0aWFsaXplU2Vuc29yKHNlbnNvclR5cGUsIGNvbmZpZyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnJlZ2lzdGVyU2Vuc29yKHNlbnNvcklkOiBudW1iZXIpOiB2b2lkIHtcbiAgY29uc3Qgc2Vuc29yQ29udGFpbmVyID0gZ2V0U2Vuc29yQ29udGFpbmVyKCk7XG4gIHJldHVybiBzZW5zb3JDb250YWluZXIudW5yZWdpc3RlclNlbnNvcihzZW5zb3JJZCk7XG59XG5cbmlmICghaXNXZWIoKSkge1xuICBpbml0aWFsaXplVUlSdW50aW1lKCk7XG59XG5cbnR5cGUgRmVhdHVyZXNDb25maWcgPSB7XG4gIGVuYWJsZUxheW91dEFuaW1hdGlvbnM6IGJvb2xlYW47XG4gIHNldEJ5VXNlcjogYm9vbGVhbjtcbn07XG5cbmxldCBmZWF0dXJlc0NvbmZpZzogRmVhdHVyZXNDb25maWcgPSB7XG4gIGVuYWJsZUxheW91dEFuaW1hdGlvbnM6IGZhbHNlLFxuICBzZXRCeVVzZXI6IGZhbHNlLFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUxheW91dEFuaW1hdGlvbnMoXG4gIGZsYWc6IGJvb2xlYW4sXG4gIGlzQ2FsbEJ5VXNlciA9IHRydWVcbik6IHZvaWQge1xuICBpZiAoaXNDYWxsQnlVc2VyKSB7XG4gICAgZmVhdHVyZXNDb25maWcgPSB7XG4gICAgICBlbmFibGVMYXlvdXRBbmltYXRpb25zOiBmbGFnLFxuICAgICAgc2V0QnlVc2VyOiB0cnVlLFxuICAgIH07XG4gICAgTmF0aXZlUmVhbmltYXRlZE1vZHVsZS5lbmFibGVMYXlvdXRBbmltYXRpb25zKGZsYWcpO1xuICB9IGVsc2UgaWYgKFxuICAgICFmZWF0dXJlc0NvbmZpZy5zZXRCeVVzZXIgJiZcbiAgICBmZWF0dXJlc0NvbmZpZy5lbmFibGVMYXlvdXRBbmltYXRpb25zICE9PSBmbGFnXG4gICkge1xuICAgIGZlYXR1cmVzQ29uZmlnLmVuYWJsZUxheW91dEFuaW1hdGlvbnMgPSBmbGFnO1xuICAgIE5hdGl2ZVJlYW5pbWF0ZWRNb2R1bGUuZW5hYmxlTGF5b3V0QW5pbWF0aW9ucyhmbGFnKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlTGF5b3V0QW5pbWF0aW9ucyhcbiAgdmlld1RhZzogbnVtYmVyLFxuICB0eXBlOiBMYXlvdXRBbmltYXRpb25UeXBlLFxuICBjb25maWc6XG4gICAgfCBMYXlvdXRBbmltYXRpb25GdW5jdGlvblxuICAgIHwgS2V5ZnJhbWVcbiAgICB8IFNoYXJlZFRyYW5zaXRpb25BbmltYXRpb25zRnVuY3Rpb25cbiAgICB8IFByb2dyZXNzQW5pbWF0aW9uQ2FsbGJhY2ssXG4gIHNoYXJlZFRyYW5zaXRpb25UYWcgPSAnJ1xuKTogdm9pZCB7XG4gIE5hdGl2ZVJlYW5pbWF0ZWRNb2R1bGUuY29uZmlndXJlTGF5b3V0QW5pbWF0aW9uKFxuICAgIHZpZXdUYWcsXG4gICAgdHlwZSxcbiAgICBzaGFyZWRUcmFuc2l0aW9uVGFnLFxuICAgIG1ha2VTaGFyZWFibGVDbG9uZVJlY3Vyc2l2ZShjb25maWcpXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVQcm9wcyh1aVByb3BzOiBzdHJpbmdbXSwgbmF0aXZlUHJvcHM6IHN0cmluZ1tdKTogdm9pZCB7XG4gIGlmICghbmF0aXZlU2hvdWxkQmVNb2NrKCkpIHtcbiAgICBOYXRpdmVSZWFuaW1hdGVkTW9kdWxlLmNvbmZpZ3VyZVByb3BzKHVpUHJvcHMsIG5hdGl2ZVByb3BzKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLGlCQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxnQkFBQSxHQUFBRCxPQUFBO0FBU0EsSUFBQUUsV0FBQSxHQUFBRixPQUFBO0FBS0EsSUFBQUcsYUFBQSxHQUFBSCxPQUFBO0FBS0EsSUFBQUksZ0JBQUEsR0FBQUosT0FBQTtBQUVBLElBQUFLLFFBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFFBQUEsR0FBQU4sT0FBQTtBQUVBLElBQUFPLFNBQUEsR0FBQVAsT0FBQTtBQVVPLElBQU1RLGFBQWEsR0FBRyxTQUFoQkEsYUFBYUEsQ0FBQTtFQUFBLE9BQVMsSUFBSTtBQUFBO0FBQUFDLE9BQUEsQ0FBQUQsYUFBQSxHQUFBQSxhQUFBO0FBV2hDLElBQU1FLFlBQVksR0FBR0YsYUFBYTtBQUFBQyxPQUFBLENBQUFDLFlBQUEsR0FBQUEsWUFBQTtBQUd6Q0MsTUFBTSxDQUFDQyxRQUFRLEdBQUcsS0FBSztBQUN2QkQsTUFBTSxDQUFDRSxJQUFJLEdBQUcsVUFBVUMsQ0FBUyxFQUFFO0VBQ2pDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsQ0FBQyxDQUFDO0FBQ2hCLENBQUM7QUFFTSxTQUFTRyxXQUFXQSxDQUFJQyxPQUFlLEVBQUVDLFFBQWdCLEVB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