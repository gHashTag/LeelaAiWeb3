eebad9a6de57d36b0fff8e23384ea7cd
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.calculateNewMassToMatchDuration = calculateNewMassToMatchDuration;
exports.criticallyDampedSpringCalculations = criticallyDampedSpringCalculations;
exports.initialCalculations = initialCalculations;
exports.isAnimationTerminatingCalculation = isAnimationTerminatingCalculation;
exports.underDampedSpringCalculations = underDampedSpringCalculations;
function bisectRoot(_ref) {
  'worklet';

  var min = _ref.min,
    max = _ref.max,
    func = _ref.func,
    _ref$maxIterations = _ref.maxIterations,
    maxIterations = _ref$maxIterations === void 0 ? 20 : _ref$maxIterations;
  var ACCURACY = 0.00005;
  var idx = maxIterations;
  var current = (max + min) / 2;
  while (Math.abs(func(current)) > ACCURACY && idx > 0) {
    idx -= 1;
    if (func(current) < 0) {
      min = current;
    } else {
      max = current;
    }
    current = (min + max) / 2;
  }
  return current;
}
function initialCalculations() {
  'worklet';

  var mass = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  var config = arguments.length > 1 ? arguments[1] : undefined;
  if (config.configIsInvalid) {
    return {
      zeta: 0,
      omega0: 0,
      omega1: 0
    };
  }
  if (config.useDuration) {
    var k = config.stiffness,
      zeta = config.dampingRatio;
    var omega0 = Math.sqrt(k / mass);
    var omega1 = omega0 * Math.sqrt(1 - zeta ** 2);
    return {
      zeta: zeta,
      omega0: omega0,
      omega1: omega1
    };
  } else {
    var c = config.damping,
      m = config.mass,
      _k = config.stiffness;
    var _zeta = c / (2 * Math.sqrt(_k * m));
    var _omega = Math.sqrt(_k / m);
    var _omega2 = _omega * Math.sqrt(1 - _zeta ** 2);
    return {
      zeta: _zeta,
      omega0: _omega,
      omega1: _omega2
    };
  }
}
function calculateNewMassToMatchDuration(x0, config, v0) {
  'worklet';

  if (config.configIsInvalid) {
    return 0;
  }
  var k = config.stiffness,
    zeta = config.dampingRatio,
    threshold = config.restSpeedThreshold,
    duration = config.duration;
  var durationForMass = function durationForMass(mass) {
    'worklet';

    var amplitude = (mass * v0 * v0 + k * x0 * x0) / (Math.exp(1 - 0.5 * zeta) * k);
    var c = zeta * 2 * Math.sqrt(k * mass);
    return 1000 * (-2 * mass / c) * Math.log(threshold * 0.01 / amplitude) - duration;
  };
  return bisectRoot({
    min: 0,
    max: 100,
    func: durationForMass
  });
}
function criticallyDampedSpringCalculations(animation, precalculatedValues) {
  'worklet';

  var toValue = animation.toValue;
  var v0 = precalculatedValues.v0,
    x0 = precalculatedValues.x0,
    omega0 = precalculatedValues.omega0,
    t = precalculatedValues.t;
  var criticallyDampedEnvelope = Math.exp(-omega0 * t);
  var criticallyDampedPosition = toValue - criticallyDampedEnvelope * (x0 + (v0 + omega0 * x0) * t);
  var criticallyDampedVelocity = criticallyDampedEnvelope * (v0 * (t * omega0 - 1) + t * x0 * omega0 * omega0);
  return {
    position: criticallyDampedPosition,
    velocity: criticallyDampedVelocity
  };
}
function underDampedSpringCalculations(animation, precalculatedValues) {
  'worklet';

  var toValue = animation.toValue,
    current = animation.current,
    velocity = animation.velocity;
  var zeta = precalculatedValues.zeta,
    t = precalculatedValues.t,
    omega0 = precalculatedValues.omega0,
    omega1 = precalculatedValues.omega1;
  var v0 = -velocity;
  var x0 = toValue - current;
  var sin1 = Math.sin(omega1 * t);
  var cos1 = Math.cos(omega1 * t);
  var underDampedEnvelope = Math.exp(-zeta * omega0 * t);
  var underDampedFrag1 = underDampedEnvelope * (sin1 * ((v0 + zeta * omega0 * x0) / omega1) + x0 * cos1);
  var underDampedPosition = toValue - underDampedFrag1;
  var underDampedVelocity = zeta * omega0 * underDampedFrag1 - underDampedEnvelope * (cos1 * (v0 + zeta * omega0 * x0) - omega1 * x0 * sin1);
  return {
    position: underDampedPosition,
    velocity: underDampedVelocity
  };
}
function isAnimationTerminatingCalculation(animation, config) {
  'worklet';

  var toValue = animation.toValue,
    velocity = animation.velocity,
    startValue = animation.startValue,
    current = animation.current;
  var isOvershooting = config.overshootClamping ? current > toValue && startValue < toValue || current < toValue && startValue > toValue : false;
  var isVelocity = Math.abs(velocity) < config.restSpeedThreshold;
  var isDisplacement = Math.abs(toValue - current) < config.restDisplacementThreshold;
  return {
    isOvershooting: isOvershooting,
    isVelocity: isVelocity,
    isDisplacement: isDisplacement
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiaXNlY3RSb290IiwiX3JlZiIsIm1pbiIsIm1heCIsImZ1bmMiLCJfcmVmJG1heEl0ZXJhdGlvbnMiLCJtYXhJdGVyYXRpb25zIiwiQUNDVVJBQ1kiLCJpZHgiLCJjdXJyZW50IiwiTWF0aCIsImFicyIsImluaXRpYWxDYWxjdWxhdGlvbnMiLCJtYXNzIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiY29uZmlnIiwiY29uZmlnSXNJbnZhbGlkIiwiemV0YSIsIm9tZWdhMCIsIm9tZWdhMSIsInVzZUR1cmF0aW9uIiwiayIsInN0aWZmbmVzcyIsImRhbXBpbmdSYXRpbyIsInNxcnQiLCJjIiwiZGFtcGluZyIsIm0iLCJjYWxjdWxhdGVOZXdNYXNzVG9NYXRjaER1cmF0aW9uIiwieDAiLCJ2MCIsInRocmVzaG9sZCIsInJlc3RTcGVlZFRocmVzaG9sZCIsImR1cmF0aW9uIiwiZHVyYXRpb25Gb3JNYXNzIiwiYW1wbGl0dWRlIiwiZXhwIiwibG9nIiwiY3JpdGljYWxseURhbXBlZFNwcmluZ0NhbGN1bGF0aW9ucyIsImFuaW1hdGlvbiIsInByZWNhbGN1bGF0ZWRWYWx1ZXMiLCJ0b1ZhbHVlIiwidCIsImNyaXRpY2FsbHlEYW1wZWRFbnZlbG9wZSIsImNyaXRpY2FsbHlEYW1wZWRQb3NpdGlvbiIsImNyaXRpY2FsbHlEYW1wZWRWZWxvY2l0eSIsInBvc2l0aW9uIiwidmVsb2NpdHkiLCJ1bmRlckRhbXBlZFNwcmluZ0NhbGN1bGF0aW9ucyIsInNpbjEiLCJzaW4iLCJjb3MxIiwiY29zIiwidW5kZXJEYW1wZWRFbnZlbG9wZSIsInVuZGVyRGFtcGVkRnJhZzEiLCJ1bmRlckRhbXBlZFBvc2l0aW9uIiwidW5kZXJEYW1wZWRWZWxvY2l0eSIsImlzQW5pbWF0aW9uVGVybWluYXRpbmdDYWxjdWxhdGlvbiIsInN0YXJ0VmFsdWUiLCJpc092ZXJzaG9vdGluZyIsIm92ZXJzaG9vdENsYW1waW5nIiwiaXNWZWxvY2l0eSIsImlzRGlzcGxhY2VtZW50IiwicmVzdERpc3BsYWNlbWVudFRocmVzaG9sZCJdLCJzb3VyY2VzIjpbInNwcmluZ1V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQW5pbWF0aW9uLCBBbmltYXRhYmxlVmFsdWUsIFRpbWVzdGFtcCB9IGZyb20gJy4uL2NvbW1vblR5cGVzJztcblxuZXhwb3J0IHR5cGUgU3ByaW5nQ29uZmlnID0ge1xuICBzdGlmZm5lc3M/OiBudW1iZXI7XG4gIG92ZXJzaG9vdENsYW1waW5nPzogYm9vbGVhbjtcbiAgcmVzdERpc3BsYWNlbWVudFRocmVzaG9sZD86IG51bWJlcjtcbiAgcmVzdFNwZWVkVGhyZXNob2xkPzogbnVtYmVyO1xuICB2ZWxvY2l0eT86IG51bWJlcjtcbn0gJiAoXG4gIHwge1xuICAgICAgbWFzcz86IG51bWJlcjtcbiAgICAgIGRhbXBpbmc/OiBudW1iZXI7XG4gICAgICBkdXJhdGlvbj86IG5ldmVyO1xuICAgICAgZGFtcGluZ1JhdGlvPzogbmV2ZXI7XG4gICAgfVxuICB8IHtcbiAgICAgIG1hc3M/OiBuZXZlcjtcbiAgICAgIGRhbXBpbmc/OiBuZXZlcjtcbiAgICAgIGR1cmF0aW9uPzogbnVtYmVyO1xuICAgICAgZGFtcGluZ1JhdGlvPzogbnVtYmVyO1xuICAgIH1cbik7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3ByaW5nQ29uZmlnSW5uZXIge1xuICB1c2VEdXJhdGlvbjogYm9vbGVhbjtcbiAgY29uZmlnSXNJbnZhbGlkOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNwcmluZ0FuaW1hdGlvbiBleHRlbmRzIEFuaW1hdGlvbjxTcHJpbmdBbmltYXRpb24+IHtcbiAgY3VycmVudDogQW5pbWF0YWJsZVZhbHVlO1xuICB0b1ZhbHVlOiBBbmltYXRhYmxlVmFsdWU7XG4gIHZlbG9jaXR5OiBudW1iZXI7XG4gIGxhc3RUaW1lc3RhbXA6IFRpbWVzdGFtcDtcbiAgc3RhcnRUaW1lc3RhbXA6IFRpbWVzdGFtcDtcbiAgc3RhcnRWYWx1ZTogbnVtYmVyO1xuICB6ZXRhOiBudW1iZXI7XG4gIG9tZWdhMDogbnVtYmVyO1xuICBvbWVnYTE6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbm5lclNwcmluZ0FuaW1hdGlvblxuICBleHRlbmRzIE9taXQ8U3ByaW5nQW5pbWF0aW9uLCAndG9WYWx1ZScgfCAnY3VycmVudCc+IHtcbiAgdG9WYWx1ZTogbnVtYmVyO1xuICBjdXJyZW50OiBudW1iZXI7XG59XG5cbmZ1bmN0aW9uIGJpc2VjdFJvb3Qoe1xuICBtaW4sXG4gIG1heCxcbiAgZnVuYyxcbiAgbWF4SXRlcmF0aW9ucyA9IDIwLFxufToge1xuICBtaW46IG51bWJlcjtcbiAgbWF4OiBudW1iZXI7XG4gIGZ1bmM6ICh4OiBudW1iZXIpID0+IG51bWJlcjtcbiAgbWF4SXRlcmF0aW9ucz86IG51bWJlcjtcbn0pIHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCBBQ0NVUkFDWSA9IDAuMDAwMDU7XG4gIGxldCBpZHggPSBtYXhJdGVyYXRpb25zO1xuICBsZXQgY3VycmVudCA9IChtYXggKyBtaW4pIC8gMjtcbiAgd2hpbGUgKE1hdGguYWJzKGZ1bmMoY3VycmVudCkpID4gQUNDVVJBQ1kgJiYgaWR4ID4gMCkge1xuICAgIGlkeCAtPSAxO1xuXG4gICAgaWYgKGZ1bmMoY3VycmVudCkgPCAwKSB7XG4gICAgICBtaW4gPSBjdXJyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXggPSBjdXJyZW50O1xuICAgIH1cbiAgICBjdXJyZW50ID0gKG1pbiArIG1heCkgLyAyO1xuICB9XG4gIHJldHVybiBjdXJyZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbENhbGN1bGF0aW9ucyhcbiAgbWFzcyA9IDAsXG4gIGNvbmZpZzogUmVjb3JkPGtleW9mIFNwcmluZ0NvbmZpZywgYW55PiAmIFNwcmluZ0NvbmZpZ0lubmVyXG4pOiB7XG4gIHpldGE6IG51bWJlcjtcbiAgb21lZ2EwOiBudW1iZXI7XG4gIG9tZWdhMTogbnVtYmVyO1xufSB7XG4gICd3b3JrbGV0JztcblxuICBpZiAoY29uZmlnLmNvbmZpZ0lzSW52YWxpZCkge1xuICAgIHJldHVybiB7IHpldGE6IDAsIG9tZWdhMDogMCwgb21lZ2ExOiAwIH07XG4gIH1cblxuICBpZiAoY29uZmlnLnVzZUR1cmF0aW9uKSB7XG4gICAgY29uc3QgeyBzdGlmZm5lc3M6IGssIGRhbXBpbmdSYXRpbzogemV0YSB9ID0gY29uZmlnO1xuXG4gICAgLyoqIG9tZWdhMCBhbmQgb21lZ2ExIGRlbm90ZSBhbmd1bGFyIGZyZXF1ZW5jeSBhbmQgbmF0dXJhbCBhbmd1bGFyIGZyZXF1ZW5jeSwgc2VlIHRoaXMgbGluayBmb3IgZm9ybXVsYXM6XG4gICAgICogIGh0dHBzOi8vY291cnNlcy5sdW1lbmxlYXJuaW5nLmNvbS9zdW55LW9zdW5pdmVyc2l0eXBoeXNpY3MvY2hhcHRlci8xNS01LWRhbXBlZC1vc2NpbGxhdGlvbnMvXG4gICAgICovXG4gICAgY29uc3Qgb21lZ2EwID0gTWF0aC5zcXJ0KGsgLyBtYXNzKTtcbiAgICBjb25zdCBvbWVnYTEgPSBvbWVnYTAgKiBNYXRoLnNxcnQoMSAtIHpldGEgKiogMik7XG5cbiAgICByZXR1cm4geyB6ZXRhLCBvbWVnYTAsIG9tZWdhMSB9O1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHsgZGFtcGluZzogYywgbWFzczogbSwgc3RpZmZuZXNzOiBrIH0gPSBjb25maWc7XG5cbiAgICBjb25zdCB6ZXRhID0gYyAvICgyICogTWF0aC5zcXJ0KGsgKiBtKSk7IC8vIGRhbXBpbmcgcmF0aW9cbiAgICBjb25zdCBvbWVnYTAgPSBNYXRoLnNxcnQoayAvIG0pOyAvLyB1bmRhbXBlZCBhbmd1bGFyIGZyZXF1ZW5jeSBvZiB0aGUgb3NjaWxsYXRvciAocmFkL21zKVxuICAgIGNvbnN0IG9tZWdhMSA9IG9tZWdhMCAqIE1hdGguc3FydCgxIC0gemV0YSAqKiAyKTsgLy8gZXhwb25lbnRpYWwgZGVjYXlcblxuICAgIHJldHVybiB7IHpldGEsIG9tZWdhMCwgb21lZ2ExIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZU5ld01hc3NUb01hdGNoRHVyYXRpb24oXG4gIHgwOiBudW1iZXIsXG4gIGNvbmZpZzogUmVjb3JkPGtleW9mIFNwcmluZ0NvbmZpZywgYW55PiAmIFNwcmluZ0NvbmZpZ0lubmVyLFxuICB2MDogbnVtYmVyXG4pIHtcbiAgJ3dvcmtsZXQnO1xuICBpZiAoY29uZmlnLmNvbmZpZ0lzSW52YWxpZCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqIFVzZSB0aGlzIGZvcm11bGE6IGh0dHBzOi8vcGh5cy5saWJyZXRleHRzLm9yZy9Cb29rc2hlbHZlcy9Vbml2ZXJzaXR5X1BoeXNpY3MvQm9vayUzQV9Vbml2ZXJzaXR5X1BoeXNpY3NfKE9wZW5TdGF4KS9Cb29rJTNBX1VuaXZlcnNpdHlfUGh5c2ljc19JXy1fTWVjaGFuaWNzX1NvdW5kX09zY2lsbGF0aW9uc19hbmRfV2F2ZXNfKE9wZW5TdGF4KS8xNSUzQV9Pc2NpbGxhdGlvbnMvMTUuMDYlM0FfRGFtcGVkX09zY2lsbGF0aW9uc1xuICAgICAgICogdG8gZmluZCB0aGUgYXN5bXB0b3RlIGFuZCBlc3RpbWF0ZSB0aGUgZGFtcGluZyB0aGF0IGdpdmVzIHVzIHRoZSBleHBlY3RlZCBkdXJhdGlvbiBcblxuICAgICAgICAgICAg4o6bIOKOmyBj4o6eICAgICAgICAgICDijp4gICAgICAgICAgIFxuICAgICAgICAgICAg4o6cLeKOnOKUgOKUgOKOnyDii4UgZHVyYXRpb27ijp8gICAgICAgICAgIFxuICAgICAgICAgICAg4o6dIOKOnTJt4o6gICAgICAgICAgICDijqAgICAgICAgICAgIFxuICAgICAgIEEg4ouFIGUgICAgICAgICAgICAgICAgICAgPSB0aHJlc2hvbGRcblxuIFxuICAgICAgQW1wbGl0dWRlIGNhbGN1bGF0ZWQgdXNpbmcgXCJDb25zZXJ2YXRpb24gb2YgZW5lcmd5XCJcbiAgICAgICAgICAgICAgICAgICAgICAgX19fX19fX19fX19fX19fX19cbiAgICAgICAgICAgICAgICAgICAgICDilbEgICAgICAyICAgICAgICAgMlxuICAgICAgICAgICAgICAgICAgICAg4pWxIG0g4ouFIHYwICArIGsg4ouFIHgwIFxuICAgICAgYW1wbGl0dWRlID0gICDilbEgIOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgOKUgFxuICAgICAgICAgICAgICAgICAg4pWy4pWxICAgICAgICAgICBrICAgICAgICBcblxuICAgICAgQW5kIHJlcGxhY2UgbWFzcyB3aXRoIGRhbXBpbmcgcmF0aW8gd2hpY2ggaXMgcHJvdmlkZWQ6IG0gPSAoY14yKS8oNCAqIGsgKiB6ZXRhXjIpICAgXG4gICAgICAqL1xuICBjb25zdCB7XG4gICAgc3RpZmZuZXNzOiBrLFxuICAgIGRhbXBpbmdSYXRpbzogemV0YSxcbiAgICByZXN0U3BlZWRUaHJlc2hvbGQ6IHRocmVzaG9sZCxcbiAgICBkdXJhdGlvbixcbiAgfSA9IGNvbmZpZztcblxuICBjb25zdCBkdXJhdGlvbkZvck1hc3MgPSAobWFzczogbnVtYmVyKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGNvbnN0IGFtcGxpdHVkZSA9XG4gICAgICAobWFzcyAqIHYwICogdjAgKyBrICogeDAgKiB4MCkgLyAoTWF0aC5leHAoMSAtIDAuNSAqIHpldGEpICogayk7XG4gICAgY29uc3QgYyA9IHpldGEgKiAyICogTWF0aC5zcXJ0KGsgKiBtYXNzKTtcbiAgICByZXR1cm4gKFxuICAgICAgMTAwMCAqICgoLTIgKiBtYXNzKSAvIGMpICogTWF0aC5sb2coKHRocmVzaG9sZCAqIDAuMDEpIC8gYW1wbGl0dWRlKSAtXG4gICAgICBkdXJhdGlvblxuICAgICk7XG4gIH07XG5cbiAgLy8gQmlzZWN0aW9uIHR1cm5zIG91dCB0byBiZSBtdWNoIGZhc3RlciB0aGFuIE5ld3RvbidzIG1ldGhvZCBpbiBvdXIgY2FzZVxuICByZXR1cm4gYmlzZWN0Um9vdCh7IG1pbjogMCwgbWF4OiAxMDAsIGZ1bmM6IGR1cmF0aW9uRm9yTWFzcyB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyaXRpY2FsbHlEYW1wZWRTcHJpbmdDYWxjdWxhdGlvbnMoXG4gIGFuaW1hdGlvbjogSW5uZXJTcHJpbmdBbmltYXRpb24sXG4gIHByZWNhbGN1bGF0ZWRWYWx1ZXM6IHtcbiAgICB2MDogbnVtYmVyO1xuICAgIHgwOiBudW1iZXI7XG4gICAgb21lZ2EwOiBudW1iZXI7XG4gICAgdDogbnVtYmVyO1xuICB9XG4pOiB7IHBvc2l0aW9uOiBudW1iZXI7IHZlbG9jaXR5OiBudW1iZXIgfSB7XG4gICd3b3JrbGV0JztcbiAgY29uc3QgeyB0b1ZhbHVlIH0gPSBhbmltYXRpb247XG5cbiAgY29uc3QgeyB2MCwgeDAsIG9tZWdhMCwgdCB9ID0gcHJlY2FsY3VsYXRlZFZhbHVlcztcblxuICBjb25zdCBjcml0aWNhbGx5RGFtcGVkRW52ZWxvcGUgPSBNYXRoLmV4cCgtb21lZ2EwICogdCk7XG4gIGNvbnN0IGNyaXRpY2FsbHlEYW1wZWRQb3NpdGlvbiA9XG4gICAgdG9WYWx1ZSAtIGNyaXRpY2FsbHlEYW1wZWRFbnZlbG9wZSAqICh4MCArICh2MCArIG9tZWdhMCAqIHgwKSAqIHQpO1xuXG4gIGNvbnN0IGNyaXRpY2FsbHlEYW1wZWRWZWxvY2l0eSA9XG4gICAgY3JpdGljYWxseURhbXBlZEVudmVsb3BlICpcbiAgICAodjAgKiAodCAqIG9tZWdhMCAtIDEpICsgdCAqIHgwICogb21lZ2EwICogb21lZ2EwKTtcblxuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiBjcml0aWNhbGx5RGFtcGVkUG9zaXRpb24sXG4gICAgdmVsb2NpdHk6IGNyaXRpY2FsbHlEYW1wZWRWZWxvY2l0eSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuZGVyRGFtcGVkU3ByaW5nQ2FsY3VsYXRpb25zKFxuICBhbmltYXRpb246IElubmVyU3ByaW5nQW5pbWF0aW9uLFxuICBwcmVjYWxjdWxhdGVkVmFsdWVzOiB7XG4gICAgemV0YTogbnVtYmVyO1xuICAgIHYwOiBudW1iZXI7XG4gICAgeDA6IG51bWJlcjtcbiAgICBvbWVnYTA6IG51bWJlcjtcbiAgICBvbWVnYTE6IG51bWJlcjtcbiAgICB0OiBudW1iZXI7XG4gIH1cbik6IHsgcG9zaXRpb246IG51bWJlcjsgdmVsb2NpdHk6IG51bWJlciB9IHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCB7IHRvVmFsdWUsIGN1cnJlbnQsIHZlbG9jaXR5IH0gPSBhbmltYXRpb247XG5cbiAgY29uc3QgeyB6ZXRhLCB0LCBvbWVnYTAsIG9tZWdhMSB9ID0gcHJlY2FsY3VsYXRlZFZhbHVlcztcblxuICBjb25zdCB2MCA9IC12ZWxvY2l0eTtcbiAgY29uc3QgeDAgPSB0b1ZhbHVlIC0gY3VycmVudDtcblxuICBjb25zdCBzaW4xID0gTWF0aC5zaW4ob21lZ2ExICogdCk7XG4gIGNvbnN0IGNvczEgPSBNYXRoLmNvcyhvbWVnYTEgKiB0KTtcblxuICAvLyB1bmRlciBkYW1wZWRcbiAgY29uc3QgdW5kZXJEYW1wZWRFbnZlbG9wZSA9IE1hdGguZXhwKC16ZXRhICogb21lZ2EwICogdCk7XG4gIGNvbnN0IHVuZGVyRGFtcGVkRnJhZzEgPVxuICAgIHVuZGVyRGFtcGVkRW52ZWxvcGUgKlxuICAgIChzaW4xICogKCh2MCArIHpldGEgKiBvbWVnYTAgKiB4MCkgLyBvbWVnYTEpICsgeDAgKiBjb3MxKTtcblxuICBjb25zdCB1bmRlckRhbXBlZFBvc2l0aW9uID0gdG9WYWx1ZSAtIHVuZGVyRGFtcGVkRnJhZzE7XG4gIC8vIFRoaXMgbG9va3MgY3JhenkgLS0gaXQncyBhY3R1YWxseSBqdXN0IHRoZSBkZXJpdmF0aXZlIG9mIHRoZSBvc2NpbGxhdGlvbiBmdW5jdGlvblxuICBjb25zdCB1bmRlckRhbXBlZFZlbG9jaXR5ID1cbiAgICB6ZXRhICogb21lZ2EwICogdW5kZXJEYW1wZWRGcmFnMSAtXG4gICAgdW5kZXJEYW1wZWRFbnZlbG9wZSAqXG4gICAgICAoY29zMSAqICh2MCArIHpldGEgKiBvbWVnYTAgKiB4MCkgLSBvbWVnYTEgKiB4MCAqIHNpbjEpO1xuXG4gIHJldHVybiB7IHBvc2l0aW9uOiB1bmRlckRhbXBlZFBvc2l0aW9uLCB2ZWxvY2l0eTogdW5kZXJEYW1wZWRWZWxvY2l0eSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBbmltYXRpb25UZXJtaW5hdGluZ0NhbGN1bGF0aW9uKFxuICBhbmltYXRpb246IElubmVyU3ByaW5nQW5pbWF0aW9uLFxuICBjb25maWc6IFBhcnRpYWw8U3ByaW5nQ29uZmlnPiAmXG4gICAgUmVxdWlyZWQ8XG4gICAgICBQaWNrPFNwcmluZ0NvbmZpZywgJ3Jlc3RTcGVlZFRocmVzaG9sZCcgfCAncmVzdERpc3BsYWNlbWVudFRocmVzaG9sZCc+XG4gICAgPlxuKToge1xuICBpc092ZXJzaG9vdGluZzogYm9vbGVhbjtcbiAgaXNWZWxvY2l0eTogYm9vbGVhbjtcbiAgaXNEaXNwbGFjZW1lbnQ6IGJvb2xlYW47XG59IHtcbiAgJ3dvcmtsZXQnO1xuICBjb25zdCB7IHRvVmFsdWUsIHZlbG9jaXR5LCBzdGFydFZhbHVlLCBjdXJyZW50IH0gPSBhbmltYXRpb247XG5cbiAgY29uc3QgaXNPdmVyc2hvb3RpbmcgPSBjb25maWcub3ZlcnNob290Q2xhbXBpbmdcbiAgICA/IChjdXJyZW50ID4gdG9WYWx1ZSAmJiBzdGFydFZhbHVlIDwgdG9WYWx1ZSkgfHxcbiAgICAgIChjdXJyZW50IDwgdG9WYWx1ZSAmJiBzdGFydFZhbHVlID4gdG9WYWx1ZSlcbiAgICA6IGZhbHNlO1xuXG4gIGNvbnN0IGlzVmVsb2NpdHkgPSBNYXRoLmFicyh2ZWxvY2l0eSkgPCBjb25maWcucmVzdFNwZWVkVGhyZXNob2xkO1xuICBjb25zdCBpc0Rpc3BsYWNlbWVudCA9XG4gICAgTWF0aC5hYnModG9WYWx1ZSAtIGN1cnJlbnQpIDwgY29uZmlnLnJlc3REaXNwbGFjZW1lbnRUaHJlc2hvbGQ7XG5cbiAgcmV0dXJuIHsgaXNPdmVyc2hvb3RpbmcsIGlzVmVsb2NpdHksIGlzRGlzcGxhY2VtZW50IH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FB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