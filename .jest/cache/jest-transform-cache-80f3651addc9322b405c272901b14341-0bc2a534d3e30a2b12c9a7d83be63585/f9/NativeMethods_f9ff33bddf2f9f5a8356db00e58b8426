0a339d1ce2bdb41b5db6913187b4fd9b
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setGestureState = exports.scrollTo = exports.measure = exports.dispatchCommand = void 0;
var _PlatformChecker = require("./PlatformChecker");
var IS_NATIVE = !(0, _PlatformChecker.shouldBeUseWeb)();
var measure;
exports.measure = measure;
if ((0, _PlatformChecker.isWeb)()) {
  exports.measure = measure = function measure(animatedRef) {
    var element = animatedRef();
    var viewportOffset = element.getBoundingClientRect();
    return {
      width: element.offsetWidth,
      height: element.offsetHeight,
      x: element.offsetLeft,
      y: element.offsetTop,
      pageX: viewportOffset.left,
      pageY: viewportOffset.top
    };
  };
} else if ((0, _PlatformChecker.isChromeDebugger)()) {
  exports.measure = measure = function measure() {
    console.warn('[Reanimated] measure() cannot be used with Chrome Debugger.');
    return null;
  };
} else if ((0, _PlatformChecker.isJest)()) {
  exports.measure = measure = function measure() {
    console.warn('[Reanimated] measure() cannot be used with Jest.');
    return null;
  };
} else if (IS_NATIVE) {
  exports.measure = measure = function measure(animatedRef) {
    'worklet';

    if (!_WORKLET) {
      return null;
    }
    var viewTag = animatedRef();
    if (viewTag === -1) {
      console.warn(`[Reanimated] The view with tag ${viewTag} is not a valid argument for measure(). This may be because the view is not currently rendered, which may not be a bug (e.g. an off-screen FlatList item).`);
      return null;
    }
    var measured = _IS_FABRIC ? _measureFabric(viewTag) : _measurePaper(viewTag);
    if (measured === null) {
      console.warn(`[Reanimated] The view with tag ${viewTag} has some undefined, not-yet-computed or meaningless value of \`LayoutMetrics\` type. This may be because the view is not currently rendered, which may not be a bug (e.g. an off-screen FlatList item).`);
      return null;
    } else if (measured.x === -1234567) {
      console.warn(`[Reanimated] The view with tag ${viewTag} returned an invalid measurement response.`);
      return null;
    } else if (isNaN(measured.x)) {
      console.warn(`[Reanimated] The view with tag ${viewTag} gets view-flattened on Android. To disable view-flattening, set \`collapsable={false}\` on this component.`);
      return null;
    } else {
      return measured;
    }
  };
} else {
  exports.measure = measure = function measure() {
    console.warn('[Reanimated] measure() is not supported on this configuration.');
    return null;
  };
}
var dispatchCommand;
exports.dispatchCommand = dispatchCommand;
if (IS_NATIVE && global._IS_FABRIC) {
  exports.dispatchCommand = dispatchCommand = function dispatchCommand(animatedRef, commandName) {
    'worklet';

    var args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    if (!_WORKLET) {
      return;
    }
    var shadowNodeWrapper = animatedRef();
    _dispatchCommandFabric(shadowNodeWrapper, commandName, args);
  };
} else if (IS_NATIVE) {
  exports.dispatchCommand = dispatchCommand = function dispatchCommand(animatedRef, commandName) {
    'worklet';

    var args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    if (!_WORKLET) {
      return;
    }
    var viewTag = animatedRef();
    _dispatchCommandPaper(viewTag, commandName, args);
  };
} else if ((0, _PlatformChecker.isWeb)()) {
  exports.dispatchCommand = dispatchCommand = function dispatchCommand() {
    console.warn('[Reanimated] dispatchCommand() is not supported on web.');
  };
} else if ((0, _PlatformChecker.isChromeDebugger)()) {
  exports.dispatchCommand = dispatchCommand = function dispatchCommand() {
    console.warn('[Reanimated] dispatchCommand() is not supported with Chrome Debugger.');
  };
} else if ((0, _PlatformChecker.isJest)()) {
  exports.dispatchCommand = dispatchCommand = function dispatchCommand() {
    console.warn('[Reanimated] dispatchCommand() is not supported with Jest.');
  };
} else {
  exports.dispatchCommand = dispatchCommand = function dispatchCommand() {
    console.warn('[Reanimated] dispatchCommand() is not supported on this configuration.');
  };
}
var scrollTo;
exports.scrollTo = scrollTo;
if ((0, _PlatformChecker.isWeb)()) {
  exports.scrollTo = scrollTo = function scrollTo(animatedRef, x, y, animated) {
    'worklet';

    var element = animatedRef();
    element.scrollTo({
      x: x,
      y: y,
      animated: animated
    });
  };
} else if (IS_NATIVE && global._IS_FABRIC) {
  exports.scrollTo = scrollTo = function scrollTo(animatedRef, x, y, animated) {
    'worklet';

    dispatchCommand(animatedRef, 'scrollTo', [x, y, animated]);
  };
} else if (IS_NATIVE) {
  exports.scrollTo = scrollTo = function scrollTo(animatedRef, x, y, animated) {
    'worklet';

    if (!_WORKLET) {
      return;
    }
    var viewTag = animatedRef();
    _scrollToPaper(viewTag, x, y, animated);
  };
} else if ((0, _PlatformChecker.isChromeDebugger)()) {
  exports.scrollTo = scrollTo = function scrollTo() {
    console.warn('[Reanimated] scrollTo() is not supported with Chrome Debugger.');
  };
} else if ((0, _PlatformChecker.isJest)()) {
  exports.scrollTo = scrollTo = function scrollTo() {
    console.warn('[Reanimated] scrollTo() is not supported with Jest.');
  };
} else {
  exports.scrollTo = scrollTo = function scrollTo() {
    console.warn('[Reanimated] scrollTo() is not supported on this configuration.');
  };
}
var setGestureState;
exports.setGestureState = setGestureState;
if (IS_NATIVE) {
  exports.setGestureState = setGestureState = function setGestureState(handlerTag, newState) {
    'worklet';

    if (!_WORKLET) {
      console.warn('[Reanimated] You can not use setGestureState in non-worklet function.');
      return;
    }
    _setGestureState(handlerTag, newState);
  };
} else if ((0, _PlatformChecker.isWeb)()) {
  exports.setGestureState = setGestureState = function setGestureState() {
    console.warn('[Reanimated] setGestureState() is not available on web.');
  };
} else if ((0, _PlatformChecker.isChromeDebugger)()) {
  exports.setGestureState = setGestureState = function setGestureState() {
    console.warn('[Reanimated] setGestureState() cannot be used with Chrome Debugger.');
  };
} else if ((0, _PlatformChecker.isJest)()) {
  exports.setGestureState = setGestureState = function setGestureState() {
    console.warn('[Reanimated] setGestureState() cannot be used with Jest.');
  };
} else {
  exports.setGestureState = setGestureState = function setGestureState() {
    console.warn('[Reanimated] setGestureState() is not supported on this configuration.');
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfUGxhdGZvcm1DaGVja2VyIiwicmVxdWlyZSIsIklTX05BVElWRSIsInNob3VsZEJlVXNlV2ViIiwibWVhc3VyZSIsImV4cG9ydHMiLCJpc1dlYiIsImFuaW1hdGVkUmVmIiwiZWxlbWVudCIsInZpZXdwb3J0T2Zmc2V0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJvZmZzZXRXaWR0aCIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsIngiLCJvZmZzZXRMZWZ0IiwieSIsIm9mZnNldFRvcCIsInBhZ2VYIiwibGVmdCIsInBhZ2VZIiwidG9wIiwiaXNDaHJvbWVEZWJ1Z2dlciIsImNvbnNvbGUiLCJ3YXJuIiwiaXNKZXN0IiwiX1dPUktMRVQiLCJ2aWV3VGFnIiwibWVhc3VyZWQiLCJfSVNfRkFCUklDIiwiX21lYXN1cmVGYWJyaWMiLCJfbWVhc3VyZVBhcGVyIiwiaXNOYU4iLCJkaXNwYXRjaENvbW1hbmQiLCJnbG9iYWwiLCJjb21tYW5kTmFtZSIsImFyZ3MiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzaGFkb3dOb2RlV3JhcHBlciIsIl9kaXNwYXRjaENvbW1hbmRGYWJyaWMiLCJfZGlzcGF0Y2hDb21tYW5kUGFwZXIiLCJzY3JvbGxUbyIsImFuaW1hdGVkIiwiX3Njcm9sbFRvUGFwZXIiLCJzZXRHZXN0dXJlU3RhdGUiLCJoYW5kbGVyVGFnIiwibmV3U3RhdGUiLCJfc2V0R2VzdHVyZVN0YXRlIl0sInNvdXJjZXMiOlsiTmF0aXZlTWV0aG9kcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE1lYXN1cmVkRGltZW5zaW9ucywgU2hhZG93Tm9kZVdyYXBwZXIgfSBmcm9tICcuL2NvbW1vblR5cGVzJztcbmltcG9ydCB7XG4gIGlzQ2hyb21lRGVidWdnZXIsXG4gIGlzSmVzdCxcbiAgaXNXZWIsXG4gIHNob3VsZEJlVXNlV2ViLFxufSBmcm9tICcuL1BsYXRmb3JtQ2hlY2tlcic7XG5cbmltcG9ydCB0eXBlIHsgQW5pbWF0ZWRSZWYgfSBmcm9tICcuL2hvb2svY29tbW9uVHlwZXMnO1xuaW1wb3J0IHR5cGUgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IElTX05BVElWRSA9ICFzaG91bGRCZVVzZVdlYigpO1xuXG5leHBvcnQgbGV0IG1lYXN1cmU6IDxUIGV4dGVuZHMgQ29tcG9uZW50PihcbiAgYW5pbWF0ZWRSZWY6IEFuaW1hdGVkUmVmPFQ+XG4pID0+IE1lYXN1cmVkRGltZW5zaW9ucyB8IG51bGw7XG5cbmlmIChpc1dlYigpKSB7XG4gIG1lYXN1cmUgPSAoYW5pbWF0ZWRSZWYpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gKGFuaW1hdGVkUmVmIGFzIGFueSkoKSBhcyBIVE1MRWxlbWVudDsgLy8gVE9ETzogZml4IHR5cGluZyBvZiBhbmltYXRlZCByZWZzIG9uIHdlYlxuICAgIGNvbnN0IHZpZXdwb3J0T2Zmc2V0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IGVsZW1lbnQub2Zmc2V0V2lkdGgsXG4gICAgICBoZWlnaHQ6IGVsZW1lbnQub2Zmc2V0SGVpZ2h0LFxuICAgICAgeDogZWxlbWVudC5vZmZzZXRMZWZ0LFxuICAgICAgeTogZWxlbWVudC5vZmZzZXRUb3AsXG4gICAgICBwYWdlWDogdmlld3BvcnRPZmZzZXQubGVmdCxcbiAgICAgIHBhZ2VZOiB2aWV3cG9ydE9mZnNldC50b3AsXG4gICAgfTtcbiAgfTtcbn0gZWxzZSBpZiAoaXNDaHJvbWVEZWJ1Z2dlcigpKSB7XG4gIG1lYXN1cmUgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKCdbUmVhbmltYXRlZF0gbWVhc3VyZSgpIGNhbm5vdCBiZSB1c2VkIHdpdGggQ2hyb21lIERlYnVnZ2VyLicpO1xuICAgIHJldHVybiBudWxsO1xuICB9O1xufSBlbHNlIGlmIChpc0plc3QoKSkge1xuICBtZWFzdXJlID0gKCkgPT4ge1xuICAgIGNvbnNvbGUud2FybignW1JlYW5pbWF0ZWRdIG1lYXN1cmUoKSBjYW5ub3QgYmUgdXNlZCB3aXRoIEplc3QuJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG59IGVsc2UgaWYgKElTX05BVElWRSkge1xuICBtZWFzdXJlID0gKGFuaW1hdGVkUmVmKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGlmICghX1dPUktMRVQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXdUYWcgPSAoYW5pbWF0ZWRSZWYgYXMgYW55KSgpO1xuICAgIGlmICh2aWV3VGFnID09PSAtMSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW1JlYW5pbWF0ZWRdIFRoZSB2aWV3IHdpdGggdGFnICR7dmlld1RhZ30gaXMgbm90IGEgdmFsaWQgYXJndW1lbnQgZm9yIG1lYXN1cmUoKS4gVGhpcyBtYXkgYmUgYmVjYXVzZSB0aGUgdmlldyBpcyBub3QgY3VycmVudGx5IHJlbmRlcmVkLCB3aGljaCBtYXkgbm90IGJlIGEgYnVnIChlLmcuIGFuIG9mZi1zY3JlZW4gRmxhdExpc3QgaXRlbSkuYFxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IG1lYXN1cmVkID0gX0lTX0ZBQlJJQ1xuICAgICAgPyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICBfbWVhc3VyZUZhYnJpYyEodmlld1RhZyBhcyBTaGFkb3dOb2RlV3JhcHBlcilcbiAgICAgIDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgX21lYXN1cmVQYXBlciEodmlld1RhZyBhcyBudW1iZXIpO1xuICAgIGlmIChtZWFzdXJlZCA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgW1JlYW5pbWF0ZWRdIFRoZSB2aWV3IHdpdGggdGFnICR7dmlld1RhZ30gaGFzIHNvbWUgdW5kZWZpbmVkLCBub3QteWV0LWNvbXB1dGVkIG9yIG1lYW5pbmdsZXNzIHZhbHVlIG9mIFxcYExheW91dE1ldHJpY3NcXGAgdHlwZS4gVGhpcyBtYXkgYmUgYmVjYXVzZSB0aGUgdmlldyBpcyBub3QgY3VycmVudGx5IHJlbmRlcmVkLCB3aGljaCBtYXkgbm90IGJlIGEgYnVnIChlLmcuIGFuIG9mZi1zY3JlZW4gRmxhdExpc3QgaXRlbSkuYFxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAobWVhc3VyZWQueCA9PT0gLTEyMzQ1NjcpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFtSZWFuaW1hdGVkXSBUaGUgdmlldyB3aXRoIHRhZyAke3ZpZXdUYWd9IHJldHVybmVkIGFuIGludmFsaWQgbWVhc3VyZW1lbnQgcmVzcG9uc2UuYFxuICAgICAgKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAoaXNOYU4obWVhc3VyZWQueCkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFtSZWFuaW1hdGVkXSBUaGUgdmlldyB3aXRoIHRhZyAke3ZpZXdUYWd9IGdldHMgdmlldy1mbGF0dGVuZWQgb24gQW5kcm9pZC4gVG8gZGlzYWJsZSB2aWV3LWZsYXR0ZW5pbmcsIHNldCBcXGBjb2xsYXBzYWJsZT17ZmFsc2V9XFxgIG9uIHRoaXMgY29tcG9uZW50LmBcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG1lYXN1cmVkO1xuICAgIH1cbiAgfTtcbn0gZWxzZSB7XG4gIG1lYXN1cmUgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBtZWFzdXJlKCkgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIGNvbmZpZ3VyYXRpb24uJ1xuICAgICk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG59XG5cbmV4cG9ydCBsZXQgZGlzcGF0Y2hDb21tYW5kOiA8VCBleHRlbmRzIENvbXBvbmVudD4oXG4gIGFuaW1hdGVkUmVmOiBBbmltYXRlZFJlZjxUPixcbiAgY29tbWFuZE5hbWU6IHN0cmluZyxcbiAgYXJncz86IEFycmF5PHVua25vd24+XG4pID0+IHZvaWQ7XG5cbmlmIChJU19OQVRJVkUgJiYgZ2xvYmFsLl9JU19GQUJSSUMpIHtcbiAgZGlzcGF0Y2hDb21tYW5kID0gKGFuaW1hdGVkUmVmLCBjb21tYW5kTmFtZSwgYXJncyA9IFtdKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGlmICghX1dPUktMRVQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzaGFkb3dOb2RlV3JhcHBlciA9IGFuaW1hdGVkUmVmKCkgYXMgU2hhZG93Tm9kZVdyYXBwZXI7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICBfZGlzcGF0Y2hDb21tYW5kRmFicmljIShzaGFkb3dOb2RlV3JhcHBlciwgY29tbWFuZE5hbWUsIGFyZ3MpO1xuICB9O1xufSBlbHNlIGlmIChJU19OQVRJVkUpIHtcbiAgZGlzcGF0Y2hDb21tYW5kID0gKGFuaW1hdGVkUmVmLCBjb21tYW5kTmFtZSwgYXJncyA9IFtdKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGlmICghX1dPUktMRVQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2aWV3VGFnID0gYW5pbWF0ZWRSZWYoKSBhcyBudW1iZXI7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICBfZGlzcGF0Y2hDb21tYW5kUGFwZXIhKHZpZXdUYWcsIGNvbW1hbmROYW1lLCBhcmdzKTtcbiAgfTtcbn0gZWxzZSBpZiAoaXNXZWIoKSkge1xuICBkaXNwYXRjaENvbW1hbmQgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKCdbUmVhbmltYXRlZF0gZGlzcGF0Y2hDb21tYW5kKCkgaXMgbm90IHN1cHBvcnRlZCBvbiB3ZWIuJyk7XG4gIH07XG59IGVsc2UgaWYgKGlzQ2hyb21lRGVidWdnZXIoKSkge1xuICBkaXNwYXRjaENvbW1hbmQgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBkaXNwYXRjaENvbW1hbmQoKSBpcyBub3Qgc3VwcG9ydGVkIHdpdGggQ2hyb21lIERlYnVnZ2VyLidcbiAgICApO1xuICB9O1xufSBlbHNlIGlmIChpc0plc3QoKSkge1xuICBkaXNwYXRjaENvbW1hbmQgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKCdbUmVhbmltYXRlZF0gZGlzcGF0Y2hDb21tYW5kKCkgaXMgbm90IHN1cHBvcnRlZCB3aXRoIEplc3QuJyk7XG4gIH07XG59IGVsc2Uge1xuICBkaXNwYXRjaENvbW1hbmQgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBkaXNwYXRjaENvbW1hbmQoKSBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgY29uZmlndXJhdGlvbi4nXG4gICAgKTtcbiAgfTtcbn1cblxuZXhwb3J0IGxldCBzY3JvbGxUbzogPFQgZXh0ZW5kcyBDb21wb25lbnQ+KFxuICBhbmltYXRlZFJlZjogQW5pbWF0ZWRSZWY8VD4sXG4gIHg6IG51bWJlcixcbiAgeTogbnVtYmVyLFxuICBhbmltYXRlZDogYm9vbGVhblxuKSA9PiB2b2lkO1xuXG5pZiAoaXNXZWIoKSkge1xuICBzY3JvbGxUbyA9IChhbmltYXRlZFJlZiwgeCwgeSwgYW5pbWF0ZWQpID0+IHtcbiAgICAnd29ya2xldCc7XG4gICAgY29uc3QgZWxlbWVudCA9IChhbmltYXRlZFJlZiBhcyBhbnkpKCkgYXMgSFRNTEVsZW1lbnQ7IC8vIFRPRE86IGZpeCB0eXBpbmcgb2YgYW5pbWF0ZWQgcmVmcyBvbiB3ZWJcbiAgICAvLyBAdHMtaWdub3JlIHNhbWUgY2FsbCBhcyBpbiByZWFjdC1uYXRpdmUtd2ViXG4gICAgZWxlbWVudC5zY3JvbGxUbyh7IHgsIHksIGFuaW1hdGVkIH0pO1xuICB9O1xufSBlbHNlIGlmIChJU19OQVRJVkUgJiYgZ2xvYmFsLl9JU19GQUJSSUMpIHtcbiAgc2Nyb2xsVG8gPSAoYW5pbWF0ZWRSZWYsIHgsIHksIGFuaW1hdGVkKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGRpc3BhdGNoQ29tbWFuZChhbmltYXRlZFJlZiBhcyBhbnksICdzY3JvbGxUbycsIFt4LCB5LCBhbmltYXRlZF0pO1xuICB9O1xufSBlbHNlIGlmIChJU19OQVRJVkUpIHtcbiAgc2Nyb2xsVG8gPSAoYW5pbWF0ZWRSZWYsIHgsIHksIGFuaW1hdGVkKSA9PiB7XG4gICAgJ3dvcmtsZXQnO1xuICAgIGlmICghX1dPUktMRVQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDYWxsaW5nIGFuaW1hdGVkUmVmIG9uIFBhcGVyIHJldHVybnMgYSBudW1iZXIgKG5hdGl2ZVRhZylcbiAgICBjb25zdCB2aWV3VGFnID0gKGFuaW1hdGVkUmVmIGFzIGFueSkoKSBhcyBudW1iZXI7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICBfc2Nyb2xsVG9QYXBlciEodmlld1RhZywgeCwgeSwgYW5pbWF0ZWQpO1xuICB9O1xufSBlbHNlIGlmIChpc0Nocm9tZURlYnVnZ2VyKCkpIHtcbiAgc2Nyb2xsVG8gPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBzY3JvbGxUbygpIGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCBDaHJvbWUgRGVidWdnZXIuJ1xuICAgICk7XG4gIH07XG59IGVsc2UgaWYgKGlzSmVzdCgpKSB7XG4gIHNjcm9sbFRvID0gKCkgPT4ge1xuICAgIGNvbnNvbGUud2FybignW1JlYW5pbWF0ZWRdIHNjcm9sbFRvKCkgaXMgbm90IHN1cHBvcnRlZCB3aXRoIEplc3QuJyk7XG4gIH07XG59IGVsc2Uge1xuICBzY3JvbGxUbyA9ICgpID0+IHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICAnW1JlYW5pbWF0ZWRdIHNjcm9sbFRvKCkgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIGNvbmZpZ3VyYXRpb24uJ1xuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBsZXQgc2V0R2VzdHVyZVN0YXRlOiAoaGFuZGxlclRhZzogbnVtYmVyLCBuZXdTdGF0ZTogbnVtYmVyKSA9PiB2b2lkO1xuXG5pZiAoSVNfTkFUSVZFKSB7XG4gIHNldEdlc3R1cmVTdGF0ZSA9IChoYW5kbGVyVGFnLCBuZXdTdGF0ZSkgPT4ge1xuICAgICd3b3JrbGV0JztcbiAgICBpZiAoIV9XT1JLTEVUKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdbUmVhbmltYXRlZF0gWW91IGNhbiBub3QgdXNlIHNldEdlc3R1cmVTdGF0ZSBpbiBub24td29ya2xldCBmdW5jdGlvbi4nXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfc2V0R2VzdHVyZVN0YXRlKGhhbmRsZXJUYWcsIG5ld1N0YXRlKTtcbiAgfTtcbn0gZWxzZSBpZiAoaXNXZWIoKSkge1xuICBzZXRHZXN0dXJlU3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKCdbUmVhbmltYXRlZF0gc2V0R2VzdHVyZVN0YXRlKCkgaXMgbm90IGF2YWlsYWJsZSBvbiB3ZWIuJyk7XG4gIH07XG59IGVsc2UgaWYgKGlzQ2hyb21lRGVidWdnZXIoKSkge1xuICBzZXRHZXN0dXJlU3RhdGUgPSAoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgJ1tSZWFuaW1hdGVkXSBzZXRHZXN0dXJlU3RhdGUoKSBjYW5ub3QgYmUgdXNlZCB3aXRoIENocm9tZSBEZWJ1Z2dlci4nXG4gICAgKTtcbiAgfTtcbn0gZWxzZSBpZiAoaXNKZXN0KCkpIHtcbiAgc2V0R2VzdHVyZVN0YXRlID0gKCkgPT4ge1xuICAgIGNvbnNvbGUud2FybignW1JlYW5pbWF0ZWRdIHNldEdlc3R1cmVTdGF0ZSgpIGNhbm5vdCBiZSB1c2VkIHdpdGggSmVzdC4nKTtcbiAgfTtcbn0gZWxzZSB7XG4gIHNldEdlc3R1cmVTdGF0ZSA9ICgpID0+IHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICAnW1JlYW5pbWF0ZWRdIHNldEdlc3R1cmVTdGF0ZSgpIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBjb25maWd1cmF0aW9uLidcbiAgICApO1xuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsSUFBQUEsZ0JBQUEsR0FBQUMsT0FBQTtBQVVBLElBQU1DLFNBQVMsR0FBRyxDQUFDLElBQUFDLCtCQUFjLEdBQUU7QUFFNUIsSUFBSUMsT0FFbUI7QUFBQUMsT0FBQSxDQUFBRCxPQUFBLEdBQUFBLE9BQUE7QUFFOUIsSUFBSSxJQUFBRSxzQkFBSyxHQUFFLEVBQUU7RUFDWEQsT0FBQSxDQUFBRCxPQUFBLEdBQUFBLE9BQU8sR0FBSSxTQUFBQSxRQUFBRyxXQUFXLEVBQUs7SUFDekIsSUFBTUMsT0FBTyxHQUFJRCxXQUFXLEVBQXlCO0lBQ3JELElBQU1FLGNBQWMsR0FBR0QsT0FBTyxDQUFDRSxxQkFBcUIsRUFBRTtJQUN0RCxPQUFPO01BQ0xDLEtBQUssRUFBRUgsT0FBTyxDQUFDSSxXQUFXO01BQzFCQyxNQUFNLEVBQUVMLE9BQU8sQ0FBQ00sWUFBWTtNQUM1QkMsQ0FBQyxFQUFFUCxPQUFPLENBQUNRLFVBQVU7TUFDckJDLENBQUMsRUFBRVQsT0FBTyxDQUFDVSxTQUFTO01BQ3BCQyxLQUFLLEVBQUVWLGNBQWMsQ0FBQ1csSUFBSTtNQUMxQkMsS0FBSyxFQUFFWixjQUFjLENBQUNhO0lBQ3hCLENBQUM7RUFDSCxDQUFDO0FBQ0gsQ0FBQyxNQUFNLElBQUksSUFBQUMsaUNBQWdCLEdBQUUsRUFBRTtFQUM3QmxCLE9BQUEsQ0FBQUQsT0FBQSxH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