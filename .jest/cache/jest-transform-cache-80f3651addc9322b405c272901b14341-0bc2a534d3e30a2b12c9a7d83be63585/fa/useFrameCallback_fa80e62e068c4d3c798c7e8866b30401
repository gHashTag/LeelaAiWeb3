a13a0cd87270bbf49459307e97a38c7b
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useFrameCallback = useFrameCallback;
var _react = require("react");
var _FrameCallbackRegistryJS = _interopRequireDefault(require("../frameCallback/FrameCallbackRegistryJS"));
var frameCallbackRegistry = new _FrameCallbackRegistryJS.default();
function useFrameCallback(callback) {
  var autostart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  var ref = (0, _react.useRef)({
    setActive: function setActive(isActive) {
      frameCallbackRegistry.manageStateFrameCallback(ref.current.callbackId, isActive);
      ref.current.isActive = isActive;
    },
    isActive: autostart,
    callbackId: -1
  });
  (0, _react.useEffect)(function () {
    ref.current.callbackId = frameCallbackRegistry.registerFrameCallback(callback);
    ref.current.setActive(ref.current.isActive);
    return function () {
      frameCallbackRegistry.unregisterFrameCallback(ref.current.callbackId);
      ref.current.callbackId = -1;
    };
  }, [callback, autostart]);
  return ref.current;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX0ZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImZyYW1lQ2FsbGJhY2tSZWdpc3RyeSIsIkZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTIiwidXNlRnJhbWVDYWxsYmFjayIsImNhbGxiYWNrIiwiYXV0b3N0YXJ0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicmVmIiwidXNlUmVmIiwic2V0QWN0aXZlIiwiaXNBY3RpdmUiLCJtYW5hZ2VTdGF0ZUZyYW1lQ2FsbGJhY2siLCJjdXJyZW50IiwiY2FsbGJhY2tJZCIsInVzZUVmZmVjdCIsInJlZ2lzdGVyRnJhbWVDYWxsYmFjayIsInVucmVnaXN0ZXJGcmFtZUNhbGxiYWNrIl0sInNvdXJjZXMiOlsidXNlRnJhbWVDYWxsYmFjay50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBGcmFtZUNhbGxiYWNrUmVnaXN0cnlKUyBmcm9tICcuLi9mcmFtZUNhbGxiYWNrL0ZyYW1lQ2FsbGJhY2tSZWdpc3RyeUpTJztcbmltcG9ydCB0eXBlIHsgRnJhbWVJbmZvIH0gZnJvbSAnLi4vZnJhbWVDYWxsYmFjay9GcmFtZUNhbGxiYWNrUmVnaXN0cnlVSSc7XG5cbmV4cG9ydCB0eXBlIEZyYW1lQ2FsbGJhY2sgPSB7XG4gIHNldEFjdGl2ZTogKGlzQWN0aXZlOiBib29sZWFuKSA9PiB2b2lkO1xuICBpc0FjdGl2ZTogYm9vbGVhbjtcbiAgY2FsbGJhY2tJZDogbnVtYmVyO1xufTtcbmNvbnN0IGZyYW1lQ2FsbGJhY2tSZWdpc3RyeSA9IG5ldyBGcmFtZUNhbGxiYWNrUmVnaXN0cnlKUygpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlRnJhbWVDYWxsYmFjayhcbiAgY2FsbGJhY2s6IChmcmFtZUluZm86IEZyYW1lSW5mbykgPT4gdm9pZCxcbiAgYXV0b3N0YXJ0ID0gdHJ1ZVxuKTogRnJhbWVDYWxsYmFjayB7XG4gIGNvbnN0IHJlZiA9IHVzZVJlZjxGcmFtZUNhbGxiYWNrPih7XG4gICAgc2V0QWN0aXZlOiAoaXNBY3RpdmU6IGJvb2xlYW4pID0+IHtcbiAgICAgIGZyYW1lQ2FsbGJhY2tSZWdpc3RyeS5tYW5hZ2VTdGF0ZUZyYW1lQ2FsbGJhY2soXG4gICAgICAgIHJlZi5jdXJyZW50LmNhbGxiYWNrSWQsXG4gICAgICAgIGlzQWN0aXZlXG4gICAgICApO1xuICAgICAgcmVmLmN1cnJlbnQuaXNBY3RpdmUgPSBpc0FjdGl2ZTtcbiAgICB9LFxuICAgIGlzQWN0aXZlOiBhdXRvc3RhcnQsXG4gICAgY2FsbGJhY2tJZDogLTEsXG4gIH0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmVmLmN1cnJlbnQuY2FsbGJhY2tJZCA9XG4gICAgICBmcmFtZUNhbGxiYWNrUmVnaXN0cnkucmVnaXN0ZXJGcmFtZUNhbGxiYWNrKGNhbGxiYWNrKTtcbiAgICByZWYuY3VycmVudC5zZXRBY3RpdmUocmVmLmN1cnJlbnQuaXNBY3RpdmUpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGZyYW1lQ2FsbGJhY2tSZWdpc3RyeS51bnJlZ2lzdGVyRnJhbWVDYWxsYmFjayhyZWYuY3VycmVudC5jYWxsYmFja0lkKTtcbiAgICAgIHJlZi5jdXJyZW50LmNhbGxiYWNrSWQgPSAtMTtcbiAgICB9O1xuICB9LCBbY2FsbGJhY2ssIGF1dG9zdGFydF0pO1xuXG4gIHJldHVybiByZWYuY3VycmVudDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyx3QkFBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBUUEsSUFBTUcscUJBQXFCLEdBQUcsSUFBSUMsZ0NBQXVCLEVBQUU7QUFFcEQsU0FBU0MsZ0JBQWdCQSxDQUM5QkMsUUFBd0MsRUFFekI7RUFBQSxJQURmQyxTQUFTLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHLElBQUk7RUFFaEIsSUFBTUcsR0FBRyxHQUFHLElBQUFDLGFBQU0sRUFBZ0I7SUFDaENDLFNBQVMsRUFBRyxTQUFBQSxVQUFBQyxRQUFpQixFQUFLO01BQ2hDWCxxQkFBcUIsQ0FBQ1ksd0JBQXdCLENBQzVDSixHQUFHLENBQUNLLE9BQU8sQ0FBQ0MsVUFBVSxFQUN0QkgsUUFBUSxDQUNUO01BQ0RILEdBQUcsQ0FBQ0ssT0FBTyxDQUFDRixRQUFRLEdBQUdBLFFBQVE7SUFDakMsQ0FBQztJQUNEQSxRQUFRLEVBQUVQLFNBQVM7SUFDbkJVLFVBQVUsRUFBRSxDQUFDO0VBQ2YsQ0FBQyxDQUFDO0VBRUYsSUFBQUMsZ0JBQVMsRUFBQyxZQUFNO0lBQ2RQLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxVQUFVLEdBQ3BCZCxxQkFBcUIsQ0FBQ2dCLHFCQUFxQixDQUFDYixRQUFRLENBQUM7SUFDdkRLLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDSCxTQUFTLENBQUNGLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDRixRQUFRLENBQUM7SUFFM0MsT0FBTyxZQUFNO01BQ1hYLHFCQUFxQixDQUFDaUIsdUJBQXVCLENBQUNULEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxVQUFVLENBQUM7TUFDckVOLEdBQUcsQ0FBQ0ssT0FBTyxDQUFDQyxVQUFVLEdBQUcsQ0FBQyxDQUFDO0lBQzdCLENBQUM7RUFDSCxDQUFDLEVBQUUsQ0FBQ1gsUUFBUSxFQUFFQyxTQUFTLENBQUMsQ0FBQztFQUV6QixPQUFPSSxHQUFHLENBQUNLLE9BQU87QUFDcEIifQ==